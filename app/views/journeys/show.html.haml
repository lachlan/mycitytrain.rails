%header
  %a.back.reverse.slide.fx{:href => "#"}Back
  %h1
    %a{:href => '/'}= SITE_NAME
- if @journey.changes.nil? or @journey.changes.empty?
  %ol.journey.detail
    %li No details available.
- else
  %ol.journey.detail
    - @journey.changes.each do |change|
      - change.each do |stop|
        %li.stop.group
          - if stop == change.first
            %span.eta{:class => classify_duration_to_now(stop.departing_at)}= duration_in_concise_words_from_now(stop.departing_at)
            %span.location= stop.station_name
            %span.time{:title => format_time(stop.departing_at, :iso8601), :"data-time" => format_time(stop.departing_at, :js)}= format_time(stop.departing_at)
          - else
            %span.eta{:class => classify_duration_to_now(stop.arriving_at)}= duration_in_concise_words_from_now(stop.arriving_at)
            %span.location= stop.station_name
            %span.time{:title => format_time(stop.arriving_at, :iso8601), :"data-time" => format_time(stop.arriving_at, :js)}= format_time(stop.arriving_at)
            - if stop.platform.to_i > 0 and (stop == change.first or stop == change.last)
              %span.platform platform #{h stop.platform}
        - if change != @journey.changes.last and stop == change.last
          %li.change Change service                  
    %li #{h duration_in_words(@journey.departing_at, @journey.arriving_at).capitalize} duration.